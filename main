import math as m


def LAB1_VAR_21(a, b) -> float:  # основная функция
    # блок проверки на пригодность типа входных данных
    if(not ((type(a) is float) or (type(a) is int))):
        raise TypeError("Результат: Ошибка, тип альфа должен быть \"float\" \
или \"int\". Тип альфа: " + type(a).__name__)
    if(not ((type(b) is float) or (type(b) is int))):
        raise TypeError("Результат: Ошибка, тип бета должен быть \"float\" \
или \"int\". Тип бетта: " + type(b).__name__)

    ta = m.tan(a)  # тангенс альфа
    tb = m.tan(b)  # тангенс бета
    
    # альфа и бета не должны быть кратны π/2 если они не кратны π
    if(((a % (m.pi/2) <= 0) and (a % m.pi != 0)) or ((b % (m.pi/2) <= 0) and (b % m.pi != 0))):
        raise ValueError("Результат: Ошибка, параметр тригонометрической функции")
    
    # произведение тангенсов не может равняться единице
    if(ta * tb >= 1-(1e-7) and ta * tb <= 1+(1e-7)):
        raise ValueError("Результат: Ошибка, ноль в знаменателе")
    
    return (ta * tb) / (1 - ta * tb)
    
# a_value, b_value - передоваемые параметры a и b в тестирующую функцию 
# expected_value - ожидаемое возвращаемое функцией значение
# error_rate - установленная погрешность 
    
    
def check_function(a_value, b_value, calculated_value=0, error_rate=1e-7):
    try:
        test_value = LAB1_VAR_21(a_value, b_value)
        if(abs(calculated_value - test_value) <= error_rate):
            print(f"Тест пройден. Значение функции с погрешностью до 10^-7: {test_value}")
            return
        else:
            print(f"Ожидаемое и расчетное значение не равны. Рассчитанное основной функцией значение: {test_value}")
            return
        
    except ValueError as x:  # неудовлетворение значению переменной
        print(x.__str__())
        
    except TypeError as y:  # неудовлетворение типа переменной
        print(y.__str__())


def TEST_LAB1_VAR_21():  # функция проверки тестовых значений
    
    # тест 1 (норма)
    print("Результат выполнения основной функции при a = -12, b = 22.123, ожидаемый результат 0.0920944")
    check_function(-12, 22.123, 0.0920944)
    print()
    
    # тест 2 (ноль в числителе)
    print("Результат выполнения основной функции при a = 0, b = 1, ожидаемый результат 0")
    check_function(0, 1, 0)
    print()
    
    # тест 3 (неверный входной тип)
    print("Результат выполнения основной функции при a = 12, b = string, ожидаемый результат Ошибка")
    check_function(-12, "string")
    print()
    
    # тест 4 (ошибка тригонометрической функции)
    print("Результат выполнения основной функции при a = pi/2, b = 15.4, ожидаемый результат Ошибка")
    check_function(m.pi / 2, 15.4)
    print()
    
    # тест 5 (ноль в знаменателе)
    print("Результат выполнения основной функции при a = pi/4, b = pi/4, ожидаемый результат Ошибка")
    check_function(m.pi / 4, m.pi / 4)
    print()
    
print("Результат тестов функции")
print()
TEST_LAB1_VAR_21()  # вызов тестирующей функции
